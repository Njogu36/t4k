doctype html
html
  head
    meta(charset='UTF-8')
    title #{course.title} Module | Teach For Kenya
    meta(name='viewport', content='width=device-width, initial-scale=1.0')
    meta(name='description', content='')
    meta(name='keywords', content='')
    link(rel='shortcut icon', type='image/x-icon', href='/icon.jpg')
    link(rel='stylesheet', type='text/css', href='/learner/css/animate.css')
    link(rel="stylesheet", href="https://cdn.datatables.net/1.10.22/css/dataTables.bootstrap4.min.css")
   
    link( rel="stylesheet", href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css")
    link(rel='stylesheet', type='text/css', href='/learner/css/line-awesome.css')
    link(rel='stylesheet', type='text/css', href='/learner/css/line-awesome-font-awesome.min.css')
    link(rel='stylesheet', type='text/css', href='/learner/css/font-awesome.min.css')
    link(rel='stylesheet', type='text/css', href='/learner/css/jquery.mCustomScrollbar.min.css')
    link(rel='stylesheet', type='text/css', href='/learner/lib/slick/slick.css')
    link(rel='stylesheet', type='text/css', href='/learner/lib/slick/slick-theme.css')
    link(rel='stylesheet', type='text/css', href='/learner/css/style.css')
    link(rel='stylesheet', type='text/css', href='/learner/css/responsive.css')
    
    style.
       #header_image
       {
         background-image: url(#{course.profile_image});
          background-position:center;
          background-repeat: no-repeat;
          background-size: cover;
          
         
          height: 250px;
          margin-top:0px
          
       }
       .card {
        box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
        transition: 0.3s;
        width: 40%;
        }

        .card:hover {
        box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2);
        }
        .container1 {
        padding: 2px 16px;
        }
        #module {
            float: left;
            width: 100%;
            color: #000000;
            font-size: 14px;
            text-transform: capitalize;
            padding: 15px 0;
            border-top: 1px solid #ececec;
            font-weight: 600;
            margin-bottom:5px;
            margin-top:5px
        }
        #module:hover {
            background-color:  #c10000;
            color: #fff;
        }
        .collapsible {
            background-color: #eee;
            color: #444;
            cursor: pointer;
            padding: 18px;
            width: 100%;
            border: none;
            text-align: left;
            outline: none;
            font-size: 15px;
        }

       /* Add a background color to the button if it is clicked on (add the .active class with JS), and when you move the mouse over it (hover) */
        .active, .collapsible:hover {
            background-color: #ccc;
        }

       /* Style the collapsible content. Note: hidden by default */
        .content {
            padding: 10px 18px;
            display: none;
            overflow: hidden;
            background-color: white;
        }
  body
    .wrapper
     
        .container-fluid
                
          
                  section.profile-account-setting
                        .container-fluid
                          .account-tabs-setting
                            != messages('message', locals)  
                            .row
                              .col-lg-3
                                .acc-leftbar
                                  #nav-tab.nav.nav-tabs(role='tablist')
                                    a#nav-acc-tab.nav-item.nav-link.active(data-toggle='tab', href='#nav-acc', role='tab', aria-controls='nav-acc', aria-selected='true')
                                      i.la.la-home
                                      | Home
                                    if course.type ==='without' || course.sub_module ===true
                                     a#nav-content-tab.nav-item.nav-link(data-toggle='tab', href='#nav-content', role='tab', aria-controls='nav-content', aria-selected='false')
                                      i.fa.fa-object-group
                                      | Content
                                     a#nav-feedback-tab.nav-item.nav-link(data-toggle='tab', href='#nav-feedback', role='tab', aria-controls='nav-feedback', aria-selected='false')
                                      i.fa.fa-commenting
                                      | Feedback
                                    if course.type ==='with'
                                     a#nav-password-tab.nav-item.nav-link(data-toggle='tab', href='#sub-modules', role='tab', aria-controls='nav-password', aria-selected='false')
                                      i.fa.fa-folder-open-o
                                      | Sub Modules
                                    
                                    
                                    
                                    if course.sub_module ===false
                                     a.nav-item.nav-link( href='/dashboard', aria-controls='nav-password', aria-selected='false')
                                      i.fa.fa-arrow-left
                                      | Go back to dashboard
                                    if course.sub_module ===true
                                     a.nav-item.nav-link( href='/view_module/#{course.module_id}', aria-controls='nav-password', aria-selected='false')
                                      i.fa.fa-arrow-left
                                      | Go back to #{course.module_title}
                                    
                                   
                                // acc-leftbar end
                              .col-lg-9
                                #nav-tabContent.tab-content
                                  
                                     
                                  #nav-acc.tab-pane.fade.show.active(role='tabpanel', aria-labelledby='nav-acc-tab')
                                    .acc-setting
                                      div(style='background-color: #c10000;border-color: #c10000;padding:20px;margin:0px')
                                       h3(style='color:white;font-weight:bold') #{course.title} / Home
                                      
                                      #header_image
                                      div(style='margin:10px')
                                       p(style='font-size:1.0em;font-weight:bold') Title: #{course.title}
                                       p(style='font-size:1.0em;font-weight:bold') Description: #{course.description}
                                       p(style='font-size:1.0em;font-weight:bold') Start Date: #{course.start_date}
                                       p(style='font-size:1.0em;font-weight:bold') End Date: #{course.end_date}
                                       p(style='font-size:1.0em;font-weight:bold') Duration: #{course.duration} day(s)
                                       p(style='font-size:1.0em;font-weight:bold') Year: #{course.year}
                                       if course.type === 'with'
                                            p(style='color:green') #{course.sub_modules} sub module(s)
                                        
                                      
                                              
                                  // Content    
                                  #nav-content.tab-pane.fade(role='tabpanel', aria-labelledby='nav-content-tab')
                                    .acc-setting
                                      div(style='background-color: #c10000;border-color: #c10000;padding:20px;margin:0px')
                                       h3(style='color:white;font-weight:bold') #{course.title} / Content
                                      if weeks.length < 1
                                       div(style='text-align:center')
                                        p No content found!
                                      if weeks.length > 0
                                       div(style='margin-bottom:0px')
                                        each week in weeks
                                         button.collapsible(type='button') 
                                          span(style='color:black;font-weight:bolder') #{week.title} 
                                         .content
                                          ul.list-group
                                            if topics.length < 1
                                              li.list-group-item(style='text-align:center')  No topics found.
                                            if topics.length > 0
                                                each topic in topics
                                                
                                                 if topic.week_id === week.id
                                                  li.list-group-item 
                                                    a(href="/view_topic/#{course.id}/#{week.id}/#{topic.id}") #{topic.no}.  #{topic.title} 
                                                     &nbsp;&nbsp;
                                                     span.badge(style='background-color:gray;color:white') #{topic.type}
                                                     if topic.id === user.current_topic_id
                                                       span(style='float:right;color:gray') Resume topic
                                                    
                                  // Feedback
                                  #nav-feedback.tab-pane.fade.show(role='tabpanel', aria-labelledby='nav-kpi-tab')
                                    .acc-setting
                                      div(style='background-color: #c10000;border-color: #c10000;padding:20px;margin:0px')
                                       h3(style='color:white;font-weight:bold')  #{course.title} / Feedback
                                      div(style='padding:20px')
                                       table.table.table-hover.table-bordered#example
                                        thead
                                         tr
                                          th Topic
                                          th Action
                                        tbody
                                         each answer in answers
                                          tr
                                           td=answer.topic_title
                                           td 
                                            a(href="/view_answer/#{course.id}/#{answer.id}") 
                                             i.fa.fa-eye

                                  // Sub Modules   
                                  #sub-modules.tab-pane.fade(role='tabpanel', aria-labelledby='nav-password-tab')
                                    .acc-setting
                                      div(style='background-color: #c10000;border-color: #c10000;padding:20px;margin:0px')
                                       h3(style='color:white;font-weight:bold') #{course.title} / Sub Modules
                                      
                                      if subs.length < 1
                                       div(style='text-align:center')
                                        p No sub modules found!

                                      if subs.length > 0
                                       div(style='height:700px;padding:25px')
                                        .row
                                           each sub in subs
                                           
                                                if sub.enabled===true
                                                  .card(style='width: 17rem;margin:5px')
                                                     .user-profy
                                                        img(src=sub.profile_image,width='130px',height='130px', alt='')
                                                        .card-body
                                                         h3 #{sub.title}
                                                         
                                                         a#module(href='/view_module/#{sub.id}', title='') View Module

                                 
                                            
                                  
                     
    // theme-layout end
    script(type='text/javascript' src='/learner/js/jquery.min.js')
    script(type='text/javascript' src='/learner/js/popper.js')
    script(type='text/javascript' src='/learner/js/bootstrap.min.js')
    script(type='text/javascript' src='/learner/js/jquery.mCustomScrollbar.js')
    script(type='text/javascript' src='/learner/lib/slick/slick.min.js')
    script(type='text/javascript' src='/learner/js/scrollbar.js')
    script(type='text/javascript' src='/learner/js/script.js')
    script(src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js")
    script(src="https://cdn.datatables.net/1.10.22/js/dataTables.bootstrap4.min.js")
    

    script.
      $(document).ready(function () {
           $('#example').DataTable();
       
      });
    script.
        var coll = document.getElementsByClassName("collapsible");
        var i;
        for (i = 0; i < coll.length; i++) {
        coll[i].addEventListener("click", function() {
        this.classList.toggle("active");
        var content = this.nextElementSibling;
        if (content.style.display === "block") {
        content.style.display = "none";
        } else {
        content.style.display = "block";
        }
        });
        }
   
    script.
                        var url = document.location.toString();
                        if(url.match('#'))
                        {
                          $('.nav-tabs a[href="#'+url.split('#')[1]+'"]').tab('show');

                        }
                        $('.nav-tabs a').on('shown.bs.tab',function(e){
                          window.location.hash = e.target.hash;
                        })
